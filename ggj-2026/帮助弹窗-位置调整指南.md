# 帮助弹窗位置调整指南

## 📐 结构说明

帮助弹窗的所有元素现在都是独立的，可以在 Godot 编辑器中自由调整位置。

### 场景节点结构
```
HelpPopup (Control - 全屏)
├── Overlay (ColorRect) ← 黑色半透明遮罩
├── HelpImage (TextureRect) ← 帮助说明图片（独立）
├── PageLabel (Label) ← 页码显示（独立）
├── PrevButton (Button) ← 上一张按钮（独立）
├── CloseButton (Button) ← 关闭按钮（独立）
└── NextButton (Button) ← 下一张按钮（独立）
```

**关键改进**：所有元素都直接挂在 `HelpPopup` 根节点下，不再嵌套在容器中。

---

## 🎯 如何调整位置

### 在 Godot 编辑器中操作

1. **打开场景**
   - 在 Godot 编辑器中打开 `Scene/HelpPopup.tscn`

2. **选择要调整的元素**
   - 在场景树中点击你要调整的节点：
     - `HelpImage` - 图片
     - `PageLabel` - 页码
     - `PrevButton` - 上一张按钮
     - `CloseButton` - 关闭按钮
     - `NextButton` - 下一张按钮

3. **调整位置**
   - 方法1：在编辑器视口中直接**拖动**元素
   - 方法2：在检查器面板修改 `offset` 值
   - 方法3：使用方向键微调位置

---

## 📊 元素定位说明

所有元素都使用**屏幕中心锚点**定位（anchor = 0.5, 0.5），这样元素会相对于屏幕中心位置定位，在不同分辨率下更稳定。

### 当前默认位置

| 元素 | 锚点 | Offset Left | Offset Top | Offset Right | Offset Bottom | 说明 |
|------|------|-------------|------------|--------------|---------------|------|
| **HelpImage** | 中心 | -500 | -300 | 500 | 300 | 图片（1000x600） |
| **PageLabel** | 中心 | -50 | 320 | 50 | 360 | 图片下方 |
| **PrevButton** | 中心 | -320 | 380 | -170 | 430 | 左下位置 |
| **CloseButton** | 中心 | -60 | 380 | 60 | 430 | 中下位置 |
| **NextButton** | 中心 | 170 | 380 | 320 | 430 | 右下位置 |

---

## 🎨 常见调整场景

### 1️⃣ 调整图片大小和位置

**场景**：想让图片更大或移到其他位置

```
选择 HelpImage 节点
在检查器中修改：
- offset_left: -600     # 左边界（负值向左）
- offset_top: -350      # 上边界（负值向上）
- offset_right: 600     # 右边界（正值向右）
- offset_bottom: 350    # 下边界（正值向下）
```

**示例**：
- 图片更大：`left: -600, top: -400, right: 600, bottom: 400` (1200x800)
- 图片上移：`top: -400, bottom: 200` (保持高度，整体上移)

### 2️⃣ 调整按钮位置

**场景**：想让按钮排成一行，而不是在图片下方

```
选择 PrevButton:
- offset_left: -600
- offset_top: -50
- offset_right: -450
- offset_bottom: 0

选择 CloseButton:
- offset_left: -75
- offset_top: -50
- offset_right: 75
- offset_bottom: 0

选择 NextButton:
- offset_left: 450
- offset_top: -50
- offset_right: 600
- offset_bottom: 0
```

结果：三个按钮水平排列在屏幕中央

### 3️⃣ 调整页码位置

**场景**：想把页码放在图片内部右下角

```
选择 PageLabel:
- offset_left: 400      # 靠右
- offset_top: 250       # 靠下
- offset_right: 490
- offset_bottom: 290
```

### 4️⃣ 将按钮移到屏幕边角

**场景**：关闭按钮放在右上角

```
选择 CloseButton
修改锚点为右上角：
- anchor_left: 1.0
- anchor_top: 0.0
- anchor_right: 1.0
- anchor_bottom: 0.0

修改偏移：
- offset_left: -140
- offset_top: 20
- offset_right: -20
- offset_bottom: 70
```

---

## 📏 调整技巧

### 技巧 1：使用网格对齐
1. 在编辑器顶部启用 **"智能捕捉"**
2. 设置网格大小（如 10 像素）
3. 拖动元素时会自动对齐网格

### 技巧 2：复制位置信息
1. 右键点击节点 → **"复制属性"**
2. 在另一个节点上右键 → **"粘贴属性"**
3. 快速复制相同位置

### 技巧 3：使用偏移预览
在检查器中修改 offset 值时：
- 按住 **Shift** 拖动滑块 = 快速调整
- 直接输入数值 = 精确控制

### 技巧 4：保持元素相对位置
如果要整体移动所有按钮：
1. 在场景树中选中所有按钮（Ctrl+点击）
2. 在编辑器中一起拖动
3. 保持相对位置不变

---

## 🎯 锚点定位说明

### 什么是锚点？
锚点决定元素相对于父容器（屏幕）的哪个位置进行定位。

### 常用锚点值

| 锚点位置 | anchor_left | anchor_top | anchor_right | anchor_bottom |
|----------|-------------|------------|--------------|---------------|
| 左上角 | 0.0 | 0.0 | 0.0 | 0.0 |
| 顶部中央 | 0.5 | 0.0 | 0.5 | 0.0 |
| 右上角 | 1.0 | 0.0 | 1.0 | 0.0 |
| 左侧中央 | 0.0 | 0.5 | 0.0 | 0.5 |
| **屏幕中心** | **0.5** | **0.5** | **0.5** | **0.5** |
| 右侧中央 | 1.0 | 0.5 | 1.0 | 0.5 |
| 左下角 | 0.0 | 1.0 | 0.0 | 1.0 |
| 底部中央 | 0.5 | 1.0 | 0.5 | 1.0 |
| 右下角 | 1.0 | 1.0 | 1.0 | 1.0 |
| 全屏铺满 | 0.0 | 0.0 | 1.0 | 1.0 |

### 如何修改锚点

**方法 1**：使用预设
1. 选择节点
2. 在工具栏点击 **"Layout"** 按钮
3. 选择预设锚点位置

**方法 2**：手动输入
1. 在检查器中找到 **"Anchor"** 部分
2. 手动输入锚点值

---

## 📐 坐标系统说明

### Offset 值的含义

以**屏幕中心锚点**为例（anchor = 0.5, 0.5）：

```
         offset_top (负值 = 向上)
                 ↑
                 │
offset_left ←────┼────→ offset_right
  (负值=向左)    │      (正值=向右)
                 │
                 ↓
         offset_bottom (正值 = 向下)
```

### 示例

如果屏幕尺寸为 1600x900：

| 位置 | Left | Top | Right | Bottom | 结果 |
|------|------|-----|-------|--------|------|
| 正中央 | -50 | -25 | 50 | 25 | 100x50 的矩形，居中 |
| 左上方 | -700 | -400 | -600 | -350 | 100x50，在左上区域 |
| 右下方 | 600 | 350 | 700 | 400 | 100x50，在右下区域 |

---

## 🎨 布局示例

### 示例 1：底部工具栏布局
```
将所有按钮放在屏幕底部居中

修改所有按钮的锚点为底部中央：
anchor_left: 0.5, anchor_top: 1.0
anchor_right: 0.5, anchor_bottom: 1.0

PrevButton:  left: -220, top: -80, right: -70,  bottom: -30
CloseButton: left: -60,  top: -80, right: 60,   bottom: -30
NextButton:  left: 70,   top: -80, right: 220,  bottom: -30
```

### 示例 2：侧边栏布局
```
按钮垂直排列在右侧

修改锚点为右侧中央：
anchor_left: 1.0, anchor_top: 0.5
anchor_right: 1.0, anchor_bottom: 0.5

PrevButton:  left: -160, top: -100, right: -10, bottom: -50
CloseButton: left: -160, top: -25,  right: -10, bottom: 25
NextButton:  left: -160, top: 50,   right: -10, bottom: 100
```

### 示例 3：极简布局
```
只在图片上显示箭头，关闭按钮在右上角

HelpImage: 保持默认
PageLabel: 隐藏或移到图片内
PrevButton: left: -550, top: -25, right: -500, bottom: 25 (图片左侧)
NextButton: left: 500,  top: -25, right: 550,  bottom: 25 (图片右侧)
CloseButton: 锚点改为右上 (1.0, 0.0)，offset: left: -80, top: 20, right: -20, bottom: 70
```

---

## 🔧 保存和恢复

### 保存当前布局
1. 调整好位置后，保存场景（Ctrl+S）
2. 位置信息会保存在 `.tscn` 文件中

### 恢复默认布局
如果调整错误，想恢复默认：
1. 查看上面的"当前默认位置"表格
2. 手动输入默认的 offset 值
3. 或者从版本控制恢复文件

---

## 🎯 实战练习

### 练习 1：制作现代风格布局
- 图片尺寸：1200x700
- 按钮透明，只显示文字
- 页码放在右下角
- 关闭按钮在右上角

### 练习 2：制作移动端风格
- 图片占满大部分屏幕
- 按钮在屏幕底部，较大
- 使用手势图标代替文字

### 练习 3：制作游戏风格
- 按钮使用游戏主题样式
- 添加边框和阴影效果
- 页码使用特殊字体

---

## 💡 专业建议

1. **保持一致性**：所有按钮使用相同的尺寸和间距
2. **考虑可访问性**：按钮不要太小（最小 40x40 像素）
3. **测试不同分辨率**：在不同窗口大小下测试布局
4. **使用安全区域**：避免按钮太靠近屏幕边缘
5. **保持清晰度**：文字和按钮不要和图片重叠太多

---

## 📝 注意事项

1. **不要修改 Overlay 节点**：它是全屏遮罩，不需要调整
2. **保持锚点一致性**：同类元素使用相同锚点更易维护
3. **先在编辑器测试**：调整后在编辑器中预览效果
4. **备份场景文件**：大改前先备份 `.tscn` 文件

---

**创建日期**: 2026-01-31  
**版本**: 1.0  
**适用于**: Godot 4.5
